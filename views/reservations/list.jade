extends ../layout

block content
  h1 Réservations

  form(action='/reservation', method='GET', style='margin-bottom: 25px; display: flex; gap: 10px; align-items: center;')
    label(for='catwayId') Numéro de catway :
    input#catwayId(type='text', name='catwayId', placeholder='Entrez un numéro de catway', value=(catwayId || ''))
    button(type='submit') Chercher

  a(href='/reservation/catways/' + (catwayId || '') + '/reservations/new') Ajouter une réservation

  if reservations.length
    table
      thead
        tr
          th Client
          th Début
          th Fin
          th Actions
      tbody
        each r in reservations
          tr
            td= r.client
            td= r.dateDebut ? r.dateDebut.toLocaleDateString('fr-FR') : '-'
            td= r.dateFin ? r.dateFin.toLocaleDateString('fr-FR') : '-'
            td
              if r.catway
                a(href='/catways/' + r.catway._id + '/reservations/' + r._id) Voir
                |  
                a(href='/reservation/catways/' + r.catway._id + '/reservations/' + r._id + '/edit') Modifier
                |  
                form(method='POST', action='/api/catways/' + r.catway._id + '/reservations/' + r._id + '/delete?_method=DELETE', style='display:inline')
                  button(type='submit', onclick="return confirm('Voulez-vous supprimer ?');") Supprimer
              else
                | Catway introuvable
  else
    p(style='margin-top: 40px; font-style: italic;') Aucune réservation trouvée.
